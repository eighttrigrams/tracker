:root {
  --body-bg: linear-gradient(135deg, #f5f5f7 0%, #e8e8ed 100%);
  --glass-bg: rgba(255, 255, 255, 0.72);
  --glass-bg-subtle: rgba(255, 255, 255, 0.5);
  --glass-bg-elevated: rgba(255, 255, 255, 0.85);
  --glass-bg-description: rgba(255, 255, 255, 0.5);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-shadow: 0 4px 24px rgba(0, 0, 0, 0.06);
  --glass-blur: 16px;
  --glass-radius: 14px;
  --accent: #0071e3;
  --accent-hover: #0077ed;
  --text-primary: #1d1d1f;
  --text-secondary: #6e6e73;
  --surface-subtle: rgba(0, 0, 0, 0.03);
}
html.dark-mode {
  --glass-bg: rgba(30, 30, 32, 0.85);
  --glass-bg-subtle: rgba(50, 50, 52, 0.7);
  --glass-bg-elevated: rgba(50, 50, 52, 0.95);
  --glass-bg-description: rgba(200, 200, 200, 0.15);
  --glass-border: rgba(255, 255, 255, 0.08);
  --glass-shadow: 0 4px 24px rgba(0, 0, 0, 0.3);
  --accent: #0a84ff;
  --accent-hover: #409cff;
  --text-primary: #f5f5f7;
  --text-secondary: #98989d;
  --surface-subtle: rgba(255, 255, 255, 0.05);
  --body-bg: linear-gradient(135deg, #1c1c1e 0%, #2c2c2e 100%);
}
* { box-sizing: border-box; }
body {
  font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'SF Pro Text', system-ui, sans-serif;
  max-width: 1100px;
  margin: 0 auto;
  padding: 24px;
  background: var(--body-bg);
  min-height: 100vh;
  color: var(--text-primary);
  transition: background 2s ease, color 2s ease;
}
h1 {
  margin: 0 0 4px 0;
  font-weight: 600;
  font-size: 1.5em;
  letter-spacing: -0.02em;
}
h2 {
  margin: 0;
  font-size: 1.15em;
  font-weight: 600;
  color: var(--text-primary);
  letter-spacing: -0.01em;
}
.top-bar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 24px;
  padding-bottom: 16px;
  border-bottom: 1px solid rgba(0, 0, 0, 0.08);
}
.login-form, .add-form { margin-bottom: 16px; display: flex; gap: 8px; }
input {
  padding: 10px 14px;
  border: 1px solid rgba(0, 0, 0, 0.1);
  border-radius: 10px;
  background: var(--glass-bg);
  backdrop-filter: blur(var(--glass-blur));
  -webkit-backdrop-filter: blur(var(--glass-blur));
  font-size: 0.95em;
  color: var(--text-primary);
  transition: all 0.2s ease;
}
input:focus {
  outline: none;
  border-color: var(--accent);
  box-shadow: 0 0 0 3px rgba(0, 113, 227, 0.15);
}
input::placeholder { color: var(--text-secondary); }
button {
  padding: 10px 18px;
  background: var(--accent);
  color: white;
  border: none;
  border-radius: 10px;
  cursor: pointer;
  font-weight: 500;
  font-size: 0.9em;
  transition: all 0.2s ease;
}
button:hover { background: var(--accent-hover); transform: translateY(-1px); }
button:active { transform: translateY(0); }
.main-layout { display: flex; gap: 28px; }
.sidebar {
  width: 200px;
  flex-shrink: 0;
  background: var(--glass-bg);
  backdrop-filter: blur(var(--glass-blur));
  -webkit-backdrop-filter: blur(var(--glass-blur));
  border-radius: var(--glass-radius);
  border: 1px solid var(--glass-border);
  box-shadow: var(--glass-shadow);
  padding: 16px;
}
.main-content { flex: 1; }
.filter-section { margin-bottom: 20px; }
.filter-section:last-child { margin-bottom: 0; }
.filter-header {
  font-weight: 600;
  font-size: 0.8em;
  color: var(--text-secondary);
  margin-bottom: 10px;
  text-transform: uppercase;
  letter-spacing: 0.04em;
  display: flex;
  align-items: center;
  gap: 6px;
}
.collapse-toggle {
  padding: 2px 6px;
  font-size: 0.75em;
  background: var(--surface-subtle);
  border-radius: 4px;
  color: var(--text-secondary);
}
.collapse-toggle:hover { background: rgba(0, 0, 0, 0.06); transform: none; }
.clear-filter {
  margin-left: auto;
  padding: 2px 6px;
  font-size: 0.75em;
  background: transparent;
  color: var(--text-secondary);
}
.clear-filter:hover { background: var(--surface-subtle); transform: none; }
.filter-items { display: flex; flex-direction: column; gap: 2px; }
.category-search {
  padding: 6px 10px;
  font-size: 0.85em;
  margin-bottom: 4px;
  width: 100%;
}
.filter-item {
  text-align: left;
  padding: 8px 12px;
  font-size: 0.9em;
  background: transparent;
  color: var(--text-primary);
  border: none;
  border-radius: 8px;
  font-weight: 400;
}
.filter-item:hover { background: var(--surface-subtle); transform: none; }
.filter-item.active {
  background: var(--accent);
  color: white;
}
.filter-items.collapsed {
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;
  gap: 6px;
}
.filter-item-label {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 4px 10px;
  background: var(--accent);
  color: white;
  border-radius: 20px;
  font-size: 0.8em;
  font-weight: 500;
}
.filter-item-label .remove-item {
  background: none;
  border: none;
  padding: 0;
  color: white;
  opacity: 0.7;
  font-size: 0.9em;
  cursor: pointer;
}
.filter-item-label .remove-item:hover { opacity: 1; transform: none; }
.items { list-style: none; padding: 0; margin: 0; }
.items li {
  padding: 16px;
  background: var(--glass-bg);
  backdrop-filter: blur(var(--glass-blur));
  -webkit-backdrop-filter: blur(var(--glass-blur));
  border: 1px solid var(--glass-border);
  border-radius: var(--glass-radius);
  margin-bottom: 10px;
  box-shadow: var(--glass-shadow);
  transition: all 0.2s ease;
}
.items li:hover {
  box-shadow: 0 6px 32px rgba(0, 0, 0, 0.1);
  transform: translateY(-1px);
}
.item-header { display: flex; justify-content: space-between; align-items: baseline; cursor: pointer; }
.item-header:hover { opacity: 0.85; }
.item-title { font-weight: 500; color: var(--text-primary); display: flex; align-items: center; gap: 8px; }
.edit-icon, .calendar-icon {
  padding: 2px 6px;
  font-size: 0.85em;
  background: transparent;
  color: var(--text-secondary);
  border: none;
  border-radius: 4px;
  opacity: 0.6;
}
.edit-icon:hover, .calendar-icon:hover, .clock-icon:hover { opacity: 1; background: var(--surface-subtle); transform: none; }
.date-picker-wrapper, .time-picker-wrapper {
  display: inline-flex;
  align-items: center;
  position: relative;
}
.date-picker-input, .time-picker-input {
  position: absolute;
  opacity: 0;
  width: 1px;
  height: 1px;
  pointer-events: none;
  padding: 0;
}
.clock-icon {
  padding: 2px 6px;
  font-size: 0.85em;
  background: transparent;
  color: var(--text-secondary);
  border: none;
  border-radius: 4px;
  opacity: 0.6;
}
.due-date {
  color: var(--accent);
  margin-right: 12px;
  font-weight: 500;
}
.due-date.overdue {
  color: #ff3b30;
}
.item-date { font-size: 0.8em; color: var(--text-secondary); }
.item-tags { margin-top: 12px; display: flex; gap: 6px; flex-wrap: wrap; align-items: center; }
.item-tags-readonly { margin-top: 10px; display: flex; gap: 6px; flex-wrap: wrap; }
.item-details-footer { display: flex; justify-content: space-between; align-items: center; margin-top: 12px; padding-top: 12px; border-top: 1px solid rgba(0, 0, 0, 0.06); }
.error {
  color: #ff3b30;
  padding: 12px 16px;
  background: rgba(255, 59, 48, 0.1);
  border-radius: 10px;
  margin-bottom: 16px;
  font-size: 0.9em;
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.error-dismiss {
  background: none;
  border: none;
  color: #ff3b30;
  font-size: 1.2em;
  cursor: pointer;
  padding: 0 4px;
  line-height: 1;
}
.entity-forms { display: flex; gap: 12px; margin-bottom: 16px; }
.add-entity-form { display: flex; gap: 8px; }
.add-entity-form input { width: 150px; }
.add-entity-form button { padding: 10px 14px; }
.tag-selector { display: inline-flex; align-items: center; flex-wrap: wrap; gap: 4px; }
.tag-selector select {
  padding: 4px 8px;
  font-size: 0.8em;
  border: 1px solid rgba(0, 0, 0, 0.08);
  border-radius: 6px;
  background: rgba(255, 255, 255, 0.8);
  color: var(--text-secondary);
  cursor: pointer;
}
.tag-selector select:hover { border-color: rgba(0, 0, 0, 0.15); }
.category-selector-dropdown { position: relative; display: inline-block; }
.category-selector-trigger {
  padding: 4px 10px;
  font-size: 0.8em;
  border: 1px solid rgba(0, 0, 0, 0.08);
  border-radius: 6px;
  background: rgba(255, 255, 255, 0.8);
  color: var(--text-secondary);
  cursor: pointer;
}
.category-selector-trigger:hover { border-color: rgba(0, 0, 0, 0.15); background: rgba(255, 255, 255, 0.95); }
.category-selector-trigger.open { border-color: var(--accent); background: rgba(255, 255, 255, 1); }
.category-selector-trigger.person { border-color: rgba(52, 199, 89, 0.3); }
.category-selector-trigger.person.open { border-color: #248a3d; }
.category-selector-trigger.place { border-color: rgba(0, 122, 255, 0.3); }
.category-selector-trigger.place.open { border-color: #0066cc; }
.category-selector-trigger.project { border-color: rgba(255, 159, 10, 0.3); }
.category-selector-trigger.project.open { border-color: #c77800; }
.category-selector-trigger.goal { border-color: rgba(255, 69, 58, 0.3); }
.category-selector-trigger.goal.open { border-color: #d70015; }
.category-selector-panel {
  position: absolute;
  top: 100%;
  left: 0;
  margin-top: 4px;
  min-width: 200px;
  max-width: 280px;
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(0, 0, 0, 0.1);
  border-radius: 8px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
  z-index: 1000;
  overflow: hidden;
}
.category-selector-search {
  width: 100%;
  padding: 8px 12px;
  border: none;
  border-bottom: 1px solid rgba(0, 0, 0, 0.08);
  font-size: 0.85em;
  background: transparent;
  outline: none;
}
.category-selector-search:focus { background: rgba(0, 0, 0, 0.02); }
.category-selector-items {
  max-height: 200px;
  overflow-y: auto;
  padding: 4px;
}
.category-selector-item {
  display: block;
  width: 100%;
  text-align: left;
  padding: 8px 12px;
  border: none;
  background: transparent;
  font-size: 0.85em;
  cursor: pointer;
  border-radius: 4px;
  color: var(--text-primary);
}
.category-selector-item:hover { background: rgba(0, 0, 0, 0.05); }
.category-selector-item.person:hover { background: rgba(52, 199, 89, 0.15); color: #248a3d; }
.category-selector-item.place:hover { background: rgba(0, 122, 255, 0.15); color: #0066cc; }
.category-selector-item.project:hover { background: rgba(255, 159, 10, 0.15); color: #c77800; }
.category-selector-item.goal:hover { background: rgba(255, 69, 58, 0.15); color: #d70015; }
.category-selector-empty {
  padding: 12px;
  text-align: center;
  color: var(--text-secondary);
  font-size: 0.85em;
}
.tag {
  display: inline-flex;
  align-items: center;
  padding: 4px 10px;
  border-radius: 20px;
  font-size: 0.8em;
  font-weight: 500;
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
}
.tag.person { background: rgba(52, 199, 89, 0.2); color: #248a3d; }
.tag.place { background: rgba(0, 122, 255, 0.2); color: #0066cc; }
.tag.project { background: rgba(255, 159, 10, 0.2); color: #c77800; }
.tag.goal { background: rgba(255, 69, 58, 0.2); color: #d70015; }
.remove-tag {
  margin-left: 4px;
  background: none;
  border: none;
  padding: 0 2px;
  font-size: 0.85em;
  color: inherit;
  opacity: 0.5;
  cursor: pointer;
}
.remove-tag:hover { opacity: 1; background: none; transform: none; }
.tabs {
  display: flex;
  gap: 4px;
  background: var(--glass-bg);
  backdrop-filter: blur(var(--glass-blur));
  -webkit-backdrop-filter: blur(var(--glass-blur));
  padding: 4px;
  border-radius: 10px;
  border: 1px solid var(--glass-border);
}
.tab {
  padding: 8px 16px;
  background: transparent;
  border: none;
  color: var(--text-secondary);
  font-size: 0.9em;
  font-weight: 500;
  border-radius: 8px;
  transition: all 0.2s ease;
}
.tab:hover { color: var(--text-primary); background: var(--surface-subtle); transform: none; }
.tab.active {
  color: white;
  background: var(--accent);
}
.manage-tab { display: flex; gap: 40px; padding: 24px 0; }
.manage-section {
  flex: 1;
  background: var(--glass-bg);
  backdrop-filter: blur(var(--glass-blur));
  -webkit-backdrop-filter: blur(var(--glass-blur));
  border: 1px solid var(--glass-border);
  border-radius: var(--glass-radius);
  padding: 20px;
  box-shadow: var(--glass-shadow);
}
.manage-section h3 {
  margin: 0 0 16px 0;
  font-size: 1em;
  font-weight: 600;
  color: var(--text-primary);
}
.entity-list { list-style: none; padding: 0; margin-top: 12px; }
.entity-list li {
  padding: 10px 12px;
  border-bottom: 1px solid rgba(0, 0, 0, 0.06);
  color: var(--text-primary);
  font-size: 0.95em;
  cursor: pointer;
  border-radius: 8px;
  margin-bottom: 4px;
  transition: background 0.2s ease;
}
.entity-list li:hover { background: var(--surface-subtle); }
.entity-list li:last-child { border-bottom: none; margin-bottom: 0; }
.entity-list .category-name { display: block; font-weight: 500; }
.entity-list .category-description {
  display: block;
  font-size: 0.85em;
  color: var(--text-secondary);
  margin-top: 4px;
  white-space: pre-wrap;
}
.entity-list .item-edit-form { cursor: default; }
.items li.expanded {
  background: rgba(255, 255, 255, 0.85);
  box-shadow: 0 8px 40px rgba(0, 0, 0, 0.12);
  position: relative;
  z-index: 100;
}
.item-details {
  margin: 12px 0 0 0;
  padding: 0;
  background: transparent;
  border: none;
}
.item-description {
  color: var(--text-secondary);
  white-space: pre-wrap;
  line-height: 1.5;
  padding: 12px 14px;
  background: var(--glass-bg-description);
  border-radius: 8px;
  margin-bottom: 12px;
  font-size: 0.9em;
}
.item-edit-form { padding: 8px 0; }
.item-edit-form input { width: 100%; margin-bottom: 10px; }
.item-edit-form textarea {
  width: 100%;
  margin-bottom: 10px;
  padding: 10px 14px;
  border: 1px solid rgba(0, 0, 0, 0.1);
  border-radius: 10px;
  font-family: inherit;
  font-size: 0.95em;
  resize: vertical;
  background: white;
}
.item-edit-form textarea:focus {
  outline: none;
  border-color: var(--accent);
  box-shadow: 0 0 0 3px rgba(0, 113, 227, 0.15);
}
.edit-buttons { display: flex; gap: 8px; }
.edit-buttons button.cancel { background: rgba(0, 0, 0, 0.06); color: var(--text-primary); }
.edit-buttons button.cancel:hover { background: rgba(0, 0, 0, 0.1); }
.edit-buttons .delete-btn { margin-left: auto; }
.search-filter { display: flex; margin-bottom: 16px; position: relative; }
.search-filter input { flex: 1; padding-right: 36px; }
.clear-search {
  position: absolute;
  right: 6px;
  top: 50%;
  transform: translateY(-50%);
  background: none;
  border: none;
  color: var(--text-secondary);
  padding: 4px 8px;
  font-size: 0.9em;
}
.clear-search:hover { color: var(--text-primary); background: none; transform: translateY(-50%); }
.today-content {
  display: flex;
  flex-direction: column;
  gap: 20px;
}
.exclusion-filter .filter-item.excluded {
  background: rgba(255, 59, 48, 0.15);
  color: #ff3b30;
  text-decoration: line-through;
}
.exclusion-filter .filter-item:not(.excluded) {
  background: rgba(52, 199, 89, 0.1);
  color: #248a3d;
}
.exclusion-filter .filter-item-label.excluded {
  background: rgba(255, 59, 48, 0.2);
  color: #ff3b30;
}
.today-section {
  padding: 20px;
  background: var(--glass-bg);
  backdrop-filter: blur(var(--glass-blur));
  -webkit-backdrop-filter: blur(var(--glass-blur));
  border: 1px solid var(--glass-border);
  border-radius: var(--glass-radius);
  box-shadow: var(--glass-shadow);
}
.today-section h3 {
  margin: 0 0 12px 0;
  font-size: 1em;
  font-weight: 600;
}
.today-section.overdue h3 { color: #ff3b30; }
.today-section.today h3 { color: var(--accent); }
.today-section.upcoming h3 { color: var(--text-primary); }
.today-section .section-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 12px;
}
.today-section .section-header h3 { margin: 0; }
.today-task-item {
  padding: 10px 12px;
  background: var(--glass-bg);
  border-radius: 8px;
  margin-bottom: 6px;
  transition: all 0.2s ease;
}
.today-task-item:last-child { margin-bottom: 0; }
.today-task-item.expanded {
  background: var(--glass-bg-elevated);
  box-shadow: var(--glass-shadow);
}
.today-task-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  cursor: pointer;
}
.today-task-header:hover { opacity: 0.85; }
.today-task-content {
  display: flex;
  flex-direction: column;
  gap: 6px;
  flex: 1;
}
.today-task-details {
  margin-top: 12px;
}
.today-task-details .item-description {
  margin-bottom: 12px;
}
.today-task-details .task-badges {
  margin-bottom: 12px;
}
.today-task-details .item-actions {
  margin-top: 12px;
  padding-top: 12px;
  border-top: 1px solid rgba(0, 0, 0, 0.06);
}
.today-task-item .task-title {
  font-weight: 500;
  color: var(--text-primary);
}
.task-time {
  color: var(--accent);
  margin-right: 8px;
}
.task-time.overdue-time {
  color: lightgray;
}
.task-day-prefix {
  color: var(--accent);
  margin-right: 8px;
}
.today-task-item .task-date {
  font-size: 0.85em;
  color: var(--text-secondary);
  flex-shrink: 0;
  margin-left: 12px;
}
.task-badges {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
}
.task-badges .tag {
  font-size: 0.75em;
  padding: 2px 8px;
}
.task-badges .importance-badge {
  font-size: 0.75em;
  color: #ff9500;
}
.task-badges .importance-badge.critical {
  color: #ff3b30;
}
.today-section.overdue .today-task-item .task-date { color: #ff3b30; }
.today-section.upcoming .today-task-item .task-date { color: var(--accent); }
.empty-message {
  color: var(--text-secondary);
  font-size: 0.9em;
  margin: 0;
}
.horizon-selector {
  display: flex;
  align-items: center;
  gap: 6px;
}
.horizon-selector span {
  font-size: 0.85em;
  color: var(--text-secondary);
}
.horizon-selector button {
  padding: 4px 10px;
  font-size: 0.8em;
  background: transparent;
  color: var(--text-secondary);
  border: 1px solid rgba(0, 0, 0, 0.1);
  border-radius: 6px;
}
.horizon-selector button:hover {
  background: var(--surface-subtle);
  transform: none;
}
.horizon-selector button.active {
  background: var(--accent);
  color: white;
  border-color: var(--accent);
}
.tasks-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
.tasks-header h2 { margin: 0; }
.sort-toggle {
  display: flex;
  gap: 0;
  background: var(--glass-bg);
  backdrop-filter: blur(var(--glass-blur));
  -webkit-backdrop-filter: blur(var(--glass-blur));
  padding: 3px;
  border-radius: 8px;
  border: 1px solid var(--glass-border);
}
.sort-toggle button {
  padding: 6px 12px;
  font-size: 0.8em;
  background: transparent;
  border: none;
  color: var(--text-secondary);
  border-radius: 6px;
  font-weight: 500;
}
.sort-toggle button:first-child { border-radius: 6px; }
.sort-toggle button:last-child { border-radius: 6px; }
.sort-toggle button.active { background: var(--accent); color: white; }
.sort-toggle button:hover:not(.active) { background: var(--surface-subtle); transform: none; }
.items li[draggable="true"] { cursor: grab; }
.items li[draggable="true"]:active { cursor: grabbing; }
.items li.dragging { opacity: 0.5; }
.items li.drag-over {
  border-color: var(--accent);
  border-style: dashed;
  background: rgba(0, 113, 227, 0.05);
}
.item-actions {
  margin-top: 12px;
  padding-top: 12px;
  border-top: 1px solid rgba(0, 0, 0, 0.06);
  display: flex;
  justify-content: space-between;
}
.delete-btn {
  background: transparent;
  color: #ff3b30;
  border: 1px solid #ff3b30;
  padding: 6px 14px;
  font-size: 0.85em;
}
.delete-btn:hover {
  background: #ff3b30;
  color: white;
}
.done-btn {
  background: transparent;
  color: #007aff;
  border: 1px solid #007aff;
  padding: 6px 14px;
  font-size: 0.85em;
}
.done-btn:hover {
  background: #007aff;
  color: white;
}
.undone-btn {
  background: transparent;
  color: #34c759;
  border: 1px solid #34c759;
  padding: 6px 14px;
  font-size: 0.85em;
}
.undone-btn:hover {
  background: #34c759;
  color: white;
}
.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.4);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  backdrop-filter: blur(4px);
  -webkit-backdrop-filter: blur(4px);
}
.modal {
  background: var(--glass-bg);
  backdrop-filter: blur(var(--glass-blur));
  -webkit-backdrop-filter: blur(var(--glass-blur));
  border: 1px solid var(--glass-border);
  border-radius: var(--glass-radius);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
  min-width: 320px;
  max-width: 400px;
}
.modal-header {
  padding: 16px 20px;
  font-weight: 600;
  font-size: 1.1em;
  border-bottom: 1px solid rgba(0, 0, 0, 0.06);
}
.modal-body {
  padding: 20px;
}
.modal-body p { margin: 0 0 8px 0; color: var(--text-secondary); }
.modal-body p.task-title { font-weight: 500; color: var(--text-primary); }
.modal-body p.warning { color: #ff3b30; font-size: 0.9em; margin-top: 12px; }
.modal-footer {
  padding: 16px 20px;
  border-top: 1px solid rgba(0, 0, 0, 0.06);
  display: flex;
  justify-content: flex-end;
  gap: 10px;
}
.modal-footer button.cancel {
  background: rgba(0, 0, 0, 0.06);
  color: var(--text-primary);
}
.modal-footer button.cancel:hover {
  background: rgba(0, 0, 0, 0.1);
}
.modal-footer button.confirm-delete {
  background: #ff3b30;
}
.modal-footer button.confirm-delete:hover {
  background: #e0352b;
}
.modal-footer button.confirm-delete:disabled {
  background: rgba(255, 59, 48, 0.4);
  cursor: not-allowed;
}
.modal-footer button.confirm-delete:disabled:hover {
  background: rgba(255, 59, 48, 0.4);
  transform: none;
}
.modal-footer button.confirm {
  background: var(--accent);
}
.modal-footer button.confirm:hover {
  background: var(--accent-hover);
}
.pending-task-modal {
  min-width: 400px;
  max-width: 500px;
}
.modal-instruction {
  font-size: 0.9em;
  margin-bottom: 16px !important;
}
.category-group {
  margin-bottom: 16px;
}
.category-group:last-child {
  margin-bottom: 0;
}
.category-group label {
  display: block;
  font-size: 0.8em;
  font-weight: 600;
  color: var(--text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.04em;
  margin-bottom: 8px;
}
.category-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}
.tag.selectable {
  cursor: pointer;
  opacity: 0.4;
  transition: all 0.2s ease;
}
.tag.selectable:hover {
  opacity: 0.7;
}
.tag.selectable.selected {
  opacity: 1;
}
.tag .check {
  margin-left: 2px;
}
.user-info {
  display: flex;
  align-items: center;
  gap: 4px;
  background: var(--glass-bg);
  backdrop-filter: blur(var(--glass-blur));
  -webkit-backdrop-filter: blur(var(--glass-blur));
  padding: 4px;
  border-radius: 10px;
  border: 1px solid var(--glass-border);
  position: relative;
  z-index: 10;
}
.current-user {
  font-size: 0.85em;
  color: var(--text-secondary);
  padding: 0 12px;
}
.logout-btn, .users-btn {
  padding: 8px 16px;
  background: transparent;
  border: none;
  color: var(--text-secondary);
  font-size: 0.9em;
  font-weight: 500;
  border-radius: 8px;
  transition: all 0.2s ease;
}
.logout-btn:hover, .users-btn:hover {
  color: var(--text-primary);
  background: var(--surface-subtle);
  transform: none;
}
.users-btn.active {
  color: white;
  background: var(--accent);
}
.user-switcher-wrapper {
  position: relative;
}
.switch-user-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 12px;
  background: transparent;
  border: none;
  color: var(--text-secondary);
  font-size: 0.9em;
  font-weight: 500;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.2s ease;
}
.switch-user-btn:hover {
  background: var(--surface-subtle);
  color: var(--text-primary);
  transform: none;
}
.switch-user-btn .current-user {
  padding: 0;
}
.dropdown-arrow {
  font-size: 0.7em;
  color: var(--text-secondary);
}
.user-switcher-dropdown {
  position: absolute;
  top: 100%;
  right: 0;
  margin-top: 4px;
  background: var(--glass-bg);
  backdrop-filter: blur(var(--glass-blur));
  -webkit-backdrop-filter: blur(var(--glass-blur));
  border: 1px solid var(--glass-border);
  border-radius: 8px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
  min-width: 150px;
  z-index: 100;
  overflow: hidden;
}
.user-switcher-item {
  padding: 10px 14px;
  cursor: pointer;
  font-size: 0.9em;
  color: var(--text-primary);
  transition: background 0.2s ease;
}
.user-switcher-item:hover {
  background: var(--surface-subtle);
}
.user-switcher-item.active {
  background: var(--accent);
  color: white;
}
.add-user-form {
  display: flex;
  gap: 8px;
  margin-bottom: 16px;
}
.add-user-form input {
  flex: 1;
}
.user-list li {
  display: flex;
  align-items: center;
  gap: 10px;
}
.user-list .username {
  flex: 1;
}
.admin-badge {
  font-size: 0.75em;
  padding: 2px 8px;
  background: var(--accent);
  color: white;
  border-radius: 10px;
  font-weight: 500;
}
.delete-user-btn {
  padding: 4px 10px;
  font-size: 0.8em;
  background: transparent;
  color: #ff3b30;
  border: 1px solid #ff3b30;
}
.delete-user-btn:hover {
  background: #ff3b30;
  color: white;
}
.login-form {
  flex-direction: column;
  max-width: 300px;
  margin: 100px auto;
  padding: 24px;
  background: var(--glass-bg);
  backdrop-filter: blur(var(--glass-blur));
  -webkit-backdrop-filter: blur(var(--glass-blur));
  border: 1px solid var(--glass-border);
  border-radius: var(--glass-radius);
  box-shadow: var(--glass-shadow);
}
.login-form h2 {
  margin-bottom: 16px;
  text-align: center;
}
.login-form input {
  width: 100%;
  margin-bottom: 12px;
}
.login-form button {
  width: 100%;
}
.username-btn, .settings-btn {
  padding: 8px 16px;
  background: transparent;
  border: none;
  color: var(--text-secondary);
  font-size: 0.9em;
  font-weight: 500;
  border-radius: 8px;
  transition: all 0.2s ease;
}
.username-btn:hover, .settings-btn:hover {
  color: var(--text-primary);
  background: var(--surface-subtle);
  transform: none;
}
.username-btn.active, .settings-btn.active {
  color: white;
  background: var(--accent);
}
.settings-section {
  max-width: 400px;
}
.settings-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 0;
  border-bottom: 1px solid rgba(0, 0, 0, 0.06);
}
.settings-item:last-child {
  border-bottom: none;
}
.settings-label {
  font-size: 0.9em;
  color: var(--text-secondary);
}
.settings-value {
  font-size: 0.9em;
  font-weight: 500;
  color: var(--text-primary);
}
.export-btn {
  background: var(--accent);
  color: white;
  border: none;
  padding: 10px 20px;
  border-radius: 6px;
  font-size: 0.9em;
  cursor: pointer;
  transition: background 0.2s;
}
.export-btn:hover {
  background: var(--accent-hover);
}
.settings-page {
  padding: 24px 0;
}
.settings-page .manage-tab {
  padding: 0;
}
.settings-separator {
  border: none;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  margin: 24px 0;
}
.shortcuts-section {
  background: var(--glass-bg);
  backdrop-filter: blur(var(--glass-blur));
  -webkit-backdrop-filter: blur(var(--glass-blur));
  border: 1px solid var(--glass-border);
  border-radius: var(--glass-radius);
  box-shadow: var(--glass-shadow);
  padding: 20px;
}
.shortcuts-section h3 {
  margin: 0 0 16px 0;
  font-size: 1em;
  font-weight: 600;
  color: var(--text-primary);
}
.shortcuts-subsection {
  margin-bottom: 20px;
}
.shortcuts-subsection:last-child {
  margin-bottom: 0;
}
.shortcuts-subsection h4 {
  margin: 0 0 8px 0;
  font-size: 0.85em;
  font-weight: 600;
  color: var(--text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.03em;
}
.shortcuts-list {
  margin-top: 0;
}
.shortcut-item {
  display: flex;
  align-items: center;
  padding: 8px 0;
  border-bottom: 1px solid rgba(0, 0, 0, 0.06);
}
.shortcut-item:last-child {
  border-bottom: none;
}
.shortcut-key {
  font-family: 'SF Mono', SFMono-Regular, Menlo, Monaco, monospace;
  font-size: 0.8em;
  background: var(--surface-subtle);
  padding: 4px 8px;
  border-radius: 4px;
  min-width: 90px;
  text-align: center;
  color: var(--text-primary);
}
.shortcut-desc {
  font-size: 0.85em;
  color: var(--text-secondary);
  margin-left: 12px;
}
.markdown-content {
  line-height: 1.5;
}
.markdown-content p {
  margin: 0 0 0.5em 0;
}
.markdown-content p:last-child {
  margin-bottom: 0;
}
.markdown-content ul, .markdown-content ol {
  margin: 0.5em 0;
  padding-left: 1.5em;
}
.markdown-content li {
  margin: 0.25em 0;
}
.markdown-content code {
  background: var(--surface-subtle);
  padding: 0.1em 0.3em;
  border-radius: 3px;
  font-family: 'SF Mono', SFMono-Regular, Menlo, Monaco, monospace;
  font-size: 0.9em;
}
.markdown-content pre {
  background: var(--surface-subtle);
  padding: 0.75em;
  border-radius: 4px;
  overflow-x: auto;
  margin: 0.5em 0;
}
.markdown-content pre code {
  background: none;
  padding: 0;
}
.markdown-content a {
  color: var(--accent);
  text-decoration: none;
}
.markdown-content a:hover {
  text-decoration: underline;
}
.markdown-content strong {
  font-weight: 600;
}
.markdown-content blockquote {
  border-left: 3px solid var(--border);
  margin: 0.5em 0;
  padding-left: 1em;
  color: var(--text-secondary);
}
.top-bar-right {
  display: flex;
  align-items: center;
  gap: 12px;
}
.work-private-toggle {
  display: flex;
  gap: 0;
  background: var(--glass-bg);
  backdrop-filter: blur(var(--glass-blur));
  -webkit-backdrop-filter: blur(var(--glass-blur));
  padding: 3px;
  border-radius: 8px;
  border: 1px solid var(--glass-border);
}
.work-private-toggle .toggle-option {
  padding: 6px 12px;
  font-size: 0.8em;
  background: transparent;
  border: none;
  color: var(--text-secondary);
  border-radius: 6px;
  font-weight: 500;
  transition: all 0.2s ease;
}
.work-private-toggle .toggle-option.active {
  background: var(--accent);
  color: white;
}
.work-private-toggle .toggle-option:hover:not(.active) {
  background: var(--surface-subtle);
  transform: none;
}
.work-private-toggle-wrapper {
  display: flex;
  align-items: center;
  gap: 8px;
}
.strict-mode-toggle {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;
  font-size: 1em;
  font-weight: 700;
  color: var(--text-secondary);
  cursor: pointer;
  border-radius: 6px;
  transition: all 0.2s ease;
  opacity: 0;
}
.work-private-toggle-wrapper:hover .strict-mode-toggle {
  opacity: 1;
}
.strict-mode-toggle:hover {
  background: var(--surface-subtle);
}
.strict-mode-toggle.active {
  color: var(--accent);
  opacity: 1;
}
.task-scope-selector {
  display: flex;
  gap: 0;
  background: var(--glass-bg);
  backdrop-filter: blur(var(--glass-blur));
  -webkit-backdrop-filter: blur(var(--glass-blur));
  padding: 2px;
  border-radius: 6px;
  border: 1px solid var(--glass-border);
}
.task-scope-selector .toggle-option {
  padding: 4px 10px;
  font-size: 0.75em;
  background: transparent;
  border: none;
  color: var(--text-secondary);
  border-radius: 4px;
  font-weight: 500;
  transition: all 0.2s ease;
  cursor: pointer;
}
.task-scope-selector .toggle-option.active {
  background: var(--accent);
  color: white;
}
.task-scope-selector .toggle-option:hover:not(.active) {
  background: var(--surface-subtle);
}
.importance-filter-toggle {
  display: flex;
  gap: 0;
  background: var(--glass-bg);
  backdrop-filter: blur(var(--glass-blur));
  -webkit-backdrop-filter: blur(var(--glass-blur));
  padding: 3px;
  border-radius: 8px;
  border: 1px solid var(--glass-border);
  margin-left: auto;
  margin-right: 8px;
}
.importance-filter-toggle button {
  padding: 6px 10px;
  font-size: 0.8em;
  background: transparent;
  border: none;
  color: var(--text-secondary);
  border-radius: 6px;
  font-weight: 600;
  transition: all 0.2s ease;
}
.importance-filter-toggle button.active {
  background: var(--accent);
  color: white;
}
.importance-filter-toggle button.important.active {
  background: #ff9500;
}
.importance-filter-toggle button.critical.active {
  background: #ff3b30;
}
.importance-filter-toggle button:hover:not(.active) {
  background: var(--surface-subtle);
  transform: none;
}
.task-importance-selector {
  display: flex;
  gap: 0;
  background: var(--glass-bg);
  backdrop-filter: blur(var(--glass-blur));
  -webkit-backdrop-filter: blur(var(--glass-blur));
  padding: 2px;
  border-radius: 6px;
  border: 1px solid var(--glass-border);
}
.task-importance-selector .toggle-option {
  padding: 4px 10px;
  font-size: 0.75em;
  background: transparent;
  border: none;
  color: var(--text-secondary);
  border-radius: 4px;
  font-weight: 500;
  transition: all 0.2s ease;
  cursor: pointer;
}
.task-importance-selector .toggle-option.active {
  background: var(--accent);
  color: white;
}
.task-importance-selector .toggle-option.important.active {
  background: #ff9500;
}
.task-importance-selector .toggle-option.critical.active {
  background: #ff3b30;
}
.task-importance-selector .toggle-option:hover:not(.active) {
  background: var(--surface-subtle);
}
.dark-mode-toggle {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 36px;
  height: 36px;
  padding: 0;
  background: var(--glass-bg);
  backdrop-filter: blur(var(--glass-blur));
  -webkit-backdrop-filter: blur(var(--glass-blur));
  border: 1px solid var(--glass-border);
  border-radius: 8px;
  font-size: 1.1em;
  color: var(--text-primary);
  cursor: pointer;
  transition: all 0.2s ease, background-color 2s ease, border-color 2s ease, color 2s ease;
}
.dark-mode-toggle:hover {
  background: var(--surface-subtle);
  transform: scale(1.05);
}
*, *::before, *::after {
  transition: background-color 2s ease, border-color 2s ease, color 2s ease, box-shadow 2s ease;
}
button, input, select, textarea {
  transition: background-color 2s ease, border-color 2s ease, color 2s ease, box-shadow 2s ease, transform 0.2s ease;
}
